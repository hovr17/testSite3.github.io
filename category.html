<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</title>
  <link rel="stylesheet" href="common.css">
  <link rel="stylesheet" href="category.css"> <!-- –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥ –Ω–µ–≥–æ —Å—Ç–∏–ª–∏ -->
  <base target="_self">
</head>
<body>
  <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
  <a href="categories.html" class="back-button">
    <div class="back-icon"></div>
  </a>

  <div class="category-container">
    <h1 class="category-title" id="categoryTitle"></h1>
    <div class="places-list" id="placesList"></div>
  </div>

  <!-- –ü–û–†–Ø–î–û–ö –°–ö–†–ò–ü–¢–û–í –î–õ–Ø –ö–ê–¢–ï–ì–û–†–ò–ò -->
  <!-- 1. –í—Å–µ –∫–æ–Ω—Ñ–∏–≥–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–∑–∞–≥—Ä—É–∂–∞–µ–º –í–°–ï, —á—Ç–æ–±—ã CATEGORIES –±—ã–ª –ø–æ–ª–Ω—ã–º) -->
  <script src="js/categories/historical_places.js"></script>
  <script src="js/categories/religious_places.js"></script>
  <script src="js/categories/cultural_places.js"></script>
  <script src="js/categories/nature_places.js"></script>
  
  <!-- 2. –ì–ª–∞–≤–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä -->
  <script src="js/core/categories_config.js"></script>
  
  <!-- 3. –õ–û–ì–ò–ö–ê –°–¢–†–ê–ù–ò–¶–´ –ö–ê–¢–ï–ì–û–†–ò–ò -->
  <script>
    console.log('üî• category.html –∑–∞–≥—Ä—É–∂–µ–Ω');
    
    // –ü–æ–ª—É—á–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ URL
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get('cat');
    
    if (!category) {
        console.error('‚ùå –ù–µ —É–∫–∞–∑–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≤ URL');
        document.body.innerHTML = '<h1>–û—à–∏–±–∫–∞: –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –≤—ã–±—Ä–∞–Ω–∞</h1>';
    }
    
    // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    const CATEGORY_NAMES = {
        'historical': '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –º–µ—Å—Ç–∞',
        'religious': '–•—Ä–∞–º—ã –∏ –º–æ–Ω–∞—Å—Ç—ã—Ä–∏',
        'cultural': '–ö—É–ª—å—Ç—É—Ä–∞ –∏ –∏—Å–∫—É—Å—Å—Ç–≤–æ',
        'nature': '–ü—Ä–∏—Ä–æ–¥–∞ –∏ –ø–∞—Ä–∫–∏'
    };
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
    document.getElementById('categoryTitle').textContent = CATEGORY_NAMES[category] || category;
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ –º–µ—Å—Ç
    const places = window.CATEGORIES[category];
    const listContainer = document.getElementById('placesList');
    
    if (!places || Object.keys(places).length === 0) {
        listContainer.innerHTML = '<p>–ú–µ—Å—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
    } else {
        Object.entries(places).forEach(([placeId, config]) => {
            const item = document.createElement('a');
            item.className = 'place-item';
            item.href = `place.html?id=${placeId}&cat=${category}`;
            
            // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –º–µ—Å—Ç–∞
            item.innerHTML = `
                <div class="place-image" style="background-image: url('${config.photoButtons?.[0]?.image || 'ui/default.jpg'}')"></div>
                <div class="place-info">
                    <h2>${config.title}</h2>
                    <p>${config.address?.text || ''}</p>
                </div>
                <div class="place-arrow">
                    <div class="arrow-icon arrow-next"></div>
                </div>
            `;
            
            listContainer.appendChild(item);
        });
    }
    
    console.log(`‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ ${Object.keys(places || {}).length} –º–µ—Å—Ç –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ${category}`);
  </script>
</body>
</html>